@(lecture: Lecture,videoResources:List[LectureResource],slideResources:List[LectureResource])

@import helper._

<h2>Edit lecture</h2>
<div class="alert alert-success">
successfully saved
</div>
<input type="hidden" id="flowPlayer" value="@routes.Assets.at("javascripts/flowplayer-5.4.0/flowplayer.swf")">
<div class="lectureTitleEdit" id="lectureTitle@lecture.id">@lecture.title</div>
<div class="lectureContentEdit" id="lectureContent@lecture.id">
@if(lecture.content!=null){
@Html(lecture.content)
}
</div>

<p>

<fieldset>
 <legend>Videos</legend>
<div class='mask' style="width:100%;">
<div class='videos'>
@for(resource <- videoResources){ 

@if(resource.file_url!=null){

<div class="videoItem">
<span class="res">
<p class="title resourceTitleEdit" id="resourceTitle@resource.id">@resource.title</p>
</span>
<span class="action" style="margin-top: 20px;">
<a href="@routes.Lectures.removeResource(resource.id,lecture.id)" type="submit"><i class="icon-remove"></i></a>
</span>
@if(resource.file_url.contains("youtube.com")){
<iframe class="videoFrameSize"
src="@resource.file_url">
</iframe>
}else{
<div class="player videoFrameSize" data-engine="flash" >
   <video preload="none">
        <source type="video/mp4" src="@routes.Assets.at("uploadVideos/"+{resource.file_url})"/>
      
         </video>
</div>
}

</div>
}
}
</div>
</div>

</fieldset>

<form  method="post" action="@routes.Lectures.addVideo(lecture.id)" enctype="multipart/form-data">
<fieldset>
    <legend>Add video to lecture</legend>
<input  type="text"  name="title" placeholder="Title">
<input  type="text"  name="videoUrl" placeholder="Video url"> or 
<input  type="file"  name="videoFile" placeholder="Video path">
<button class="btn btn-primary" type="submit" data-loading-text="Loading...">Add</button>
</fieldset>
</form>



<fieldset>
 <legend>Slides</legend>
<div class='mask' >
<div class='slides'>
@for(resource <- slideResources){
@if(resource.file_url!=null){
<div class="slideItem">
<span class="res">
@if(resource.file_url.contains("http")){
<a class="title resourceTitleEdit" id="resourceTitle@resource.id" href ="@resource.file_url">
@resource.title
 </a>
}else{
<a class="title resourceTitleEdit" id="resourceTitle@resource.id" href ="@routes.Assets.at("uploadSlides/"+{resource.file_url})">
@resource.title
 </a>
} 
</span>
<span class="action">
<a href="@routes.Lectures.removeResource(resource.id,lecture.id)" type="submit"><i class="icon-remove"></i></a>
</span>
</div>
}
}
</div>
</div>


</fieldset>

<form  method="post" action="@routes.Lectures.addSlide(lecture.id)" enctype="multipart/form-data">
<fieldset>
    <legend>Add slides to lecture</legend>
<input  type="text"  name="title" placeholder="Title">
<input  type="text"  name="slideUrl" placeholder="Slide url"> or 
<input type="file" name="slideFile" placeholder="Slide path">
<button class="btn btn-primary" type="submit" data-loading-text="Loading...">Add</button>
</fieldset>
</form>

<script type="text/javascript">
$(document).ready(function() {
	
	      var flowPlayer=$('#flowPlayer').val();
		   // install flowplayer to an element with CSS class "player"
		   $(".player").flowplayer({ 
			   swf: flowPlayer
		   });
		
		   $('.alert-success').hide();
		   $('.lectureTitleEdit').editable(
				   function(value, settings) {
						 $('.alert-success').hide();
						var lectureTitleid=$(this).attr('id');
						 var toRemove = 'lectureTitle';
						 var id = lectureTitleid.replace(toRemove,'');
						var result=value;
						myJsRoutes.controllers.Lectures.updateTitle().ajax({
							data: {id:id,value:value},
						    success : function(data) {
							result=data;
							$('#lecture'+id).html(data);
							$('.alert-success').show();
						    }
						});
						return(result);
					}
		   );
		   
		   
		   $('.resourceTitleEdit').editable(
				   function(value, settings) {
						 $('.alert-success').hide();

							var resourceTitleid=$(this).attr('id');
							 var toRemove = 'resourceTitle';
							 var id = resourceTitleid.replace(toRemove,'');
						var result=value;
						myJsRoutes.controllers.Lectures.updateResourceTitle().ajax({
							data: {id:id,value:value},
						    success : function(data) {
							result=data;
							$('.alert-success').show();
						    }
						});
						return(result);
					}
		   );
		   
		   
		});
</script>
	
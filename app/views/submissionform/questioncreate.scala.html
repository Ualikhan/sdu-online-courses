@(user:User,course:Course,submissionForm:SubmissionForm,questions: List[Question])

@import helper._
@main(user){

<style>
  #sortable{ list-style-type: none; margin: 0; padding: 0; float: left; margin-right: 10px; background: #eee; padding: 5px; width: 143px;}
  #sortable li{ margin: 5px; padding: 5px; font-size: 1.2em; width: 120px; }
</style>

<div class="container-fluid">
  <div class="row-fluid">
    <div class="span3">
    </div>
    <div class="span8">
<h3>@course.name</h3>
By @course.owner.name
@if(course.owner.company!=null){
,@course.owner.company
}
<div class="menuBar">
<ul class="nav nav-pills">
  <li >
    <a href="@routes.Courses.coursePage(course.id)">Home</a>
  </li>
  <li><a href="@routes.Lectures.lecturePage(course.id)">Lectures</a></li>
  <li class="active"><a href="@routes.Assignments.assignmentPage(course.id)">Assignments</a></li>
  <li><a href="@routes.Application.index">Community</a></li>
</ul>
</div>
</div>
</div>
</div>
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span3">

    </div>
    <div class="span8">
      <div class="contentBar">
      	@for(question<-questions){
      	<div class="questions">
      	@question.questionContent
      	<div id="updateAnswerFormSuccess@question.id" class="alert alert-success">
		successfully saved
		</div>
      	@if(question.answers.size>0){
      	
      	<form class="updateAnswerForm" id="updateAnswerForm@question.id" method="post" action="@routes.Answers.updateAnswer(question.id)">
      	@if(question.answerType.name.equals("QA")){
		<label for="answer@question.id">Answer</label>
		<textarea class="questionAnswerTextArea" name="answer@question.id">@question.answers(0).answerContent</textarea>
		<br/>
		}else{
      	<ol type="A">
		@for(cn <- 1 to question.answers.size){
		<li>
		@if(question.answerType.name.equals("MCT")){
		<textarea class="questionAnswerTextArea" name="answer@cn">@question.answers(cn-1).answerContent</textarea>
		@if(question.answers(cn-1).isTrueAnswer==true){
		<input type="hidden" id="answerTrue@cn" name="answerTrue@cn" value="1">
		<input type="checkbox" class="answerCheck" data="@cn" checked="checked">
		}else{
		<input type="hidden" id="answerTrue@cn" name="answerTrue@cn">
		<input type="checkbox" class="answerCheck" data="@cn">
		}
		
		}else{
		@if(question.answerType.name.equals("SCT")){
		<textarea class="questionAnswerTextArea" name="answer@cn">@question.answers(cn-1).answerContent</textarea>
		@if(question.answers(cn-1).isTrueAnswer==true){
		<input type="radio" name="answerTrue@question.id" value="@cn" checked="checked">
		}else{
		<input type="radio" name="answerTrue@question.id" value="@cn">
		}
		}
		
		}
		</li>
		}
		</ol>
		}
		<button style="float: right;" type="submit" class="updateAnswerClick" id="@question.id">Submit</button>
		</form>
		}else{
		<form class="createAnswerForm" id="createAnswerForm@question.id" method="post" action="@routes.Answers.newAnswer()">
      	<input type="hidden" name="questionId" value="@question.id">
      	@if(question.answerType.name.equals("QA")){
      	<label for="answer@question.id">Answer</label>
		<textarea class="questionAnswerTextArea" name="answer@question.id"></textarea>
		<br/>
      	}else{
		<ol type="A">
		@for(cn <- 1 to question.numOfAnswers){
		<li>
		@if(question.answerType.name.equals("MCT")){
		<textarea class="questionAnswerTextArea" name="answer@cn"></textarea>
		<input type="hidden" id="answerTrue@cn" name="answerTrue@cn">
		<input type="checkbox" class="answerCheck" data="@cn">
		}else{
		@if(question.answerType.name.equals("SCT")){
		<textarea class="questionAnswerTextArea" name="answer@cn"></textarea>
		<input type="radio" name="answerTrue@question.id" value="@cn">
		}
		
		}
		</li>
		}
		</ol>
		}
		<button style="float: right;" type="submit">Submit</button>
		</form>
		}
		<hr>
		</div>
		}
	<fieldset>
    <legend>Add question</legend>	
	<form method="post" action="@routes.Questions.newQuestion(submissionForm.id)">
	<p>
	<label for="questionContent">Question</label>
	<textarea class="questionAnswerTextArea" name="questionContent" rows="5" cols="10"></textarea>
	</p>
	<p>
	<label for="answerType">Answer type</label>
	<select id="answerType" name="answerType">
	<option value="QA">Question-Answer</option>
	<option value="SCT">Single choice test</option>
	<option value="MCT">Multiple choice test</option>
	</select>
	</p>
	<p id="numofAnswers">
	<label for="numOfAnswers">Number of answers</label>
	<input type="text" name="numOfAnswers">
	</p>
	<p  id="numofRightAnswers">
	<label for="numOfRightAnswers">Number of right answers</label>
	<input type="text" name="numOfRightAnswers">
	</p>
	<input type="submit" value="Submit">
	</form>
	</fieldset>
		</div>
    </div>
  </div>
</div>

}
<script type="text/javascript">
$(document).ready(function(){

	$('.alert-success').hide();
$(function() {
	$('#numofAnswers').hide();
	$('#numofRightAnswers').hide();
	  
	$('.updateAnswerForm').ajaxForm({
	    success : function(data) {
			$('#updateAnswerFormSuccess'+data).show();
			}
	});
	
	$('.createAnswerForm').ajaxForm({
	    success : function(data) {
			$('#updateAnswerFormSuccess'+data).show();
			}
	});
	
	
	

	$('.answerCheck').on('click',function(){
		var id=$(this).attr('data');
		if($(this).is(':checked')){
		$('#answerTrue'+id).val('1');
		}
		else{
			$('#answerTrue'+id).val('');
		}
	});
	
	$('#answerType').on('change', function() {
		if($('#answerType').val()=='QA'){
			  $('#numofAnswers').hide();
			  $('#numofRightAnswers').hide();
			 }
			 else{
				 if($('#answerType').val()=='SCT'){
					  $('#numofAnswers').show();
					  $('#numofRightAnswers').hide();
					 }
				 else{
					 $('#numofAnswers').show();
					 $('#numofRightAnswers').show();
				 }
			 }
		});
  });
});
</script>